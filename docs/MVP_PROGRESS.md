# 每天吃点啥 - MVP 进度总结

## 当前阶段：✅ MVP 基础功能开发完成

---

## 一、已完成功能

### 后端 (Django + DRF)

| 模块 | 功能 | 状态 |
|------|------|------|
| **数据模型** | Recipe 食谱表 | ✅ |
| | Ingredient 食材表 | ✅ |
| | RecipeIngredient 关联表 | ✅ |
| **API 接口** | 食谱列表 `GET /recipes/` | ✅ |
| | 食谱详情 `GET /recipes/{id}/` | ✅ |
| | 推荐接口 `GET /recipes/recommend/` | ✅ |
| | 食材列表 `GET /ingredients/` | ✅ |
| | 食材详情 `GET /ingredients/{id}/` | ✅ |
| **筛选/搜索** | 按餐段筛选 (meal_type) | ✅ |
| | 按难度筛选 (difficulty) | ✅ |
| | 关键词搜索 (search) | ✅ |
| | 分页 (page/page_size) | ✅ |
| **数据导入** | Markdown 解析脚本 | ✅ |
| | 批量导入脚本 | ✅ |
| **管理后台** | Django Admin 配置 | ✅ |

**数据统计：**
- 食谱：327 条
- 食材：1928 条
- 有封面图：163 条

---

### 前端 (React Native + Expo)

| 模块 | 功能 | 状态 |
|------|------|------|
| **首页** | 卡片堆叠展示食谱 | ✅ |
| | 左滑切换下一道菜 | ✅ |
| | 点击边缘切换 | ✅ |
| | 封面图展示（含默认图） | ✅ |
| | 难度星级显示 | ✅ |
| | 餐段标签显示 | ✅ |
| | 下拉刷新换一批 | ✅ |
| **详情页** | 封面图展示 | ✅ |
| | 菜名/难度/耗时 | ✅ |
| | 食材清单（名称+用量） | ✅ |
| | 烹饪步骤（分步展示） | ✅ |
| | 小贴士展示 | ✅ |
| | 返回导航 | ✅ |
| **收藏** | 收藏按钮 UI | ✅ |
| | 本地状态管理（MMKV） | ✅ |
| **搜索** | 搜索页面 | ✅ |
| | 搜索栏组件 | ✅ |
| | 搜索历史存储（MMKV） | ✅ |
| | 搜索结果分页 | ✅ |
| **首页优化** | 按餐段分区展示 | ✅ |
| | 随机推荐 | ✅ |
| | 点击卡片跳转详情 | ✅ |

---

## 二、未完成功能

### MVP 必须完成 (P0)（✅ 已完成）

| 功能 | 当前状态 | 说明 |
|------|----------|------|
| **收藏持久化** | ✅ | 已接入 MMKV 存储 |
| **收藏列表页** | ⚠️ | 收藏功能已实现，独立列表页待开发 |
| **按餐段分区展示** | ✅ | 已实现，支持早餐/午餐/晚餐/甜点/饮品分区，并支持随机推荐 |
| **搜索功能** | ✅ | 已实现搜索页面、搜索栏组件、搜索历史存储 |
| **封面图静态服务** | ⚠️ | cover_url 存本地路径，后端需配置静态文件服务 |

### P1 功能（MVP 后优先）

| 功能 | 状态 | 说明 |
|------|------|------|
| 按菜名搜索 | ✅ | 已完成 |
| 收藏列表页 | ⚠️ | 待开发独立页面 |
| 口味偏好 | ❌ | 本地存储偏好设置 |
| 难度筛选 | ❌ | 前端筛选 UI |

### P2 功能（后续迭代）

| 功能 | 说明 |
|------|------|
| 冰箱反查 | 根据现有食材反查可用菜谱（详见 DEVELOPMENT_SUMMARY.md） |
| 购物清单 | 汇总食材生成购物清单 |
| 营养计算 | 调用 AI 填充营养数据 |
| 制作记录 | 记录用户制作过的食谱及次数 |
| 智能推荐优化 | 基于用户历史行为优化推荐算法 |
| 食谱分享 | 支持分享食谱到其他应用 |
| 食谱评价 | 用户评分和评价功能 |

---

## 三、开发里程碑

### ✅ 阶段 1：MVP 核心功能（已完成 - 2026-01-23）

1. ✅ **收藏功能持久化**
   - 已接入 MMKV 存储
   - 实现收藏/取消收藏本地存储

2. ✅ **首页按餐段分区**
   - 已实现按早餐/午餐/晚餐/甜点/饮品分区展示
   - 支持随机推荐和下拉刷新

3. ✅ **搜索功能**
   - 已实现搜索页面和搜索栏组件
   - 已实现搜索历史存储（MMKV）
   - 已实现搜索结果分页

### ⚠️ 阶段 2：完善体验（进行中）

1. **收藏列表页**
   - 开发独立的收藏列表页面
   - 展示用户收藏的所有食谱

2. **封面图服务**
   - Django 配置 `MEDIA_URL` 和 `STATICFILES_DIRS`
   - 将 `recipes_data` 目录作为静态资源挂载
   - 或：图片上传至 CDN，数据库存完整 URL

### 📋 阶段 3：P1 功能开发（待开始）

1. **口味偏好设置**
   - 偏好设置页面
   - 更新用户偏好数据
   - 推荐算法优化

2. **难度筛选**
   - 前端筛选 UI
   - 接入后端已有筛选接口

### 🚀 阶段 4：P2 功能开发（规划中）

详见 `DEVELOPMENT_SUMMARY.md` 中的"未来功能规划"章节

---

## 四、技术债务

| 项目 | 说明 |
|------|------|
| API_BASE_URL 硬编码 | 需抽取为环境变量 |
| 错误处理 | 需统一错误提示 UI |
| 加载状态 | 骨架屏/占位符优化 |
| TypeScript 类型 | 部分类型需完善 |
| 无图菜谱封面 | 163/327 有图，建议优化 `find_cover_image` 逻辑 |

---

## 五、项目结构

```
whatToEatToday/
├── backend/                 # Django 后端
│   ├── apps/
│   │   ├── recipes/         # 食谱模块
│   │   ├── ingredients/     # 食材模块
│   │   └── users/           # 用户模块（预留）
│   ├── config/              # Django 配置
│   └── db.sqlite3           # SQLite 数据库
├── frontend/                # React Native 前端
│   └── app/
│       ├── (tabs)/          # Tab 页面
│       │   ├── index.tsx    # 首页（卡片推荐）
│       │   └── two.tsx      # Tab2（待开发收藏页）
│       └── recipe/
│           └── [id].tsx     # 详情页
├── scripts/                 # 数据处理脚本
│   ├── parse_markdown.py    # Markdown 解析
│   └── import_recipes.py    # 数据导入
├── recipes_data/            # 菜谱原始数据
└── docs/                    # 文档
```

---

---

## 📝 相关文档

- [开发总结](./DEVELOPMENT_SUMMARY.md) - 详细的功能开发总结和未来规划
- [API 文档](./API_DOCUMENTATION.md) - 完整的 API 接口文档

---

*最后更新时间：2026-01-23*
